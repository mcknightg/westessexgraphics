import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup} from "@angular/forms";
import { ActivatedRoute, Router} from "@angular/router";
import {jobService} from "../services/job.service";
import {job} from "../services/app-model";

@Component({
  selector: 'app-job-form',
  templateUrl: './job-form.component.html',
  styleUrls: ['./job-form.component.scss']
})
export class jobFormComponent implements OnInit {
  item:job;
  form:FormGroup;

  constructor(private fb: FormBuilder,private service:jobService,private router: Router,private route: ActivatedRoute) {
    this.item = this.emptyItem();
    this.form = this.createForm();
  }

  ngOnInit(): void {
     let id = this.route.snapshot.paramMap.get('id');
     if(id){
         this.service.getById(id).subscribe(i=>{
             this.item = i;
             this.form = this.createForm();
         });
     }
  }

  public save() {
    this.service.save(Object.assign({}, this.item,this.form.getRawValue())).subscribe(()=>{
        this.back();
    });
  }

  public back(){
     this.router.navigate(['/jobs']).then();
  }

  public emptyItem():job{
    return {
			id:null,
			actualcenters:'',
			actualcenters2:'',
			actualnounits:'',
			actualnounits2:'',
			addelectronicart:'',
			addnegs:'',
			addother:'',
			addpolymer:'',
			addposttiffs:'',
			addpreflight:'',
			aexmlsent:'',
			archived:'',
			artnumb:'',
			barcodecolor:'',
			billingstatus:'',
			compensatedrepeat:'',
			completiondate:'',
			contactemail:'',
			contactperson:'',
			customer:{
				id:null,
				customernotes:'',
				fax:'',
				fedexnumber:'',
				foldername:'',
				hidden:'',
				industry:'',
				location:'',
				multiplier:0,
				name:'',
				note:'',
				phone:'',
				platemat:'',
				platemat2:'',
				platetype:'',
				platetype2:'',
				primarycsr:{
					id:null,
					department:{
						id:null,
						name:'',
						classType:'',
					},
					person:{
						id:null,
						emailaddress:'',
						emptype:{
							id:null,
							description:'',
							classType:'',
						},
						fax:'',
						fullname:'',
						isdefault:'',
						jobtitle:'',
						mobile:'',
						phone:'',
						classType:'',
					},
					classType:'',
				},
				proofingreqs:'',
				salesperson:{
					id:null,
					department:{
						id:null,
						name:'',
						classType:'',
					},
					person:{
						id:null,
						emailaddress:'',
						emptype:{
							id:null,
							description:'',
							classType:'',
						},
						fax:'',
						fullname:'',
						isdefault:'',
						jobtitle:'',
						mobile:'',
						phone:'',
						classType:'',
					},
					classType:'',
				},
				shipmethod:{
					id:null,
					name:'',
					classType:'',
				},
				terms:'',
				termsdue:0,
				type:'',
				upsnumber:'',
				wasteinches:0,
				classType:'',
			},
			customerservice:{
				id:null,
				department:{
					id:null,
					name:'',
					classType:'',
				},
				person:{
					id:null,
					emailaddress:'',
					emptype:{
						id:null,
						description:'',
						classType:'',
					},
					fax:'',
					fullname:'',
					isdefault:'',
					jobtitle:'',
					mobile:'',
					phone:'',
					classType:'',
				},
				classType:'',
			},
			cylinderrepeat:'',
			dateentry:'',
			distoredsizearound:'',
			distortedcenters:'',
			distortedcenters2:'',
			distortedsizeacross:'',
			distorttype:'',
			entryPerson:'',
			entrydate:'',
			facebackprint:'',
			filename:'',
			invoice:{
				id:null,
				approved:'',
				iifCreated:'',
				invoicedate:'',
				plates:0,
				revisions:0,
				total:'',
				classType:'',
			},
			invoicenumb:'',
			jobshipmethod:{
				id:null,
				name:'',
				classType:'',
			},
			lastpickedspecsheet:'',
			name:'',
			neworreplate:'',
			orientation:'',
			person:{
				id:null,
				emailaddress:'',
				emptype:{
					id:null,
					description:'',
					classType:'',
				},
				fax:'',
				fullname:'',
				isdefault:'',
				jobtitle:'',
				mobile:'',
				phone:'',
				classType:'',
			},
			pitch:'',
			platesordered:0,
			polymerdue:'',
			ponumbertitled:'',
			portalemail:'',
			portalnotes:'',
			prevtgnumber:'',
			projectId:'',
			proofsordered:0,
			readytoship:'',
			removed:'',
			revisions:0,
			scheduleDepts:'',
			shipto:{
				id:null,
				address1:'',
				address2:'',
				altcompanyname:'',
				attn:'',
				city:'',
				company:'',
				country:'',
				note:'',
				state:'',
				zip:'',
				classType:'',
			},
			source:'',
			specsheet:{
				id:null,
				addtonearline:'',
				approvalrequired:'',
				avtlocation:'',
				avttype:'',
				barsneeded:'',
				barwidthreduction:'',
				bcd:'',
				bearercolor:'',
				bearerlocation:'',
				bearersize:'',
				bleed:'',
				bstlocation:'',
				bsttype:'',
				centerlinetriangle:'',
				centermarks:'',
				clampbearers:'',
				cropmark:'',
				cropmarklocation:'',
				cushionneeded:'',
				description:'',
				devicetype:'',
				distheight:'',
				distwidth:'',
				emulsionfaceprintdd:'',
				engravingneeded:'',
				eyespotcolor:'',
				eyespotlocation:'',
				eyespotqty:'',
				eyespotsize:'',
				filetype:'',
				filmcurve:'',
				firstknife:'',
				gauge:'',
				gmghotfolder:'',
				gmgprofile:'',
				ispublic:'',
				jobid:0,
				linescreen:'',
				magneticback:'',
				microdotlocation:'',
				microdotqty:'',
				microdotsize:'',
				minimumplatechg:0,
				mirror:'',
				negative:'',
				orientation:{
					id:null,
					imgpath:'',
					name:'',
					classType:'',
				},
				orientationmark:'',
				other:'',
				outsideplatematerial:'',
				outsideservicetype:'',
				pdfoutput:'',
				pharmdistortion:'',
				pharmrepeat:'',
				pharmstepdist:'',
				pharmstepqty:'',
				pinregisterlocation:'',
				pinregisterqty:'',
				pinregistersize:'',
				platebend:'',
				platefinalheight:'',
				platefinalwidth:'',
				plateheight:'',
				platemarks:'',
				platematerial:'',
				plateoffset:'',
				platerelief:'',
				platethickness:'',
				platetype:'',
				platewidth:'',
				printsurface:'',
				procamplitude:'',
				procanilox:'',
				procbump:'',
				procfilmcurve:'',
				procfsync:'',
				proclinescreen:'',
				procmindot:'',
				procplatemat:'',
				procplaterate:{
					id:null,
					baseprice:0,
					isdefault:'',
					rateunits:{
						id:null,
						name:'',
						classType:'',
					},
					seconddescription:'',
					servicenote:'',
					servicetype:{
						id:null,
						categoryname:'',
						iifclass:'',
						iifcode:'',
						type:'',
						classType:'',
					},
					size:'',
					classType:'',
				},
				procplaterelief:'',
				procresolution:'',
				procscreentype:'',
				proctrap:'',
				proofingnotes:'',
				resolution:'',
				runningbearer:'',
				runningbearers:'',
				scribespecs:'',
				sideguide:'',
				sleeveface:'',
				slitlinecolor:'',
				slitlinelocation:'',
				slitlinesize:'',
				specnotes:'',
				spotamplitude:'',
				spotanilox:'',
				spotbump:'',
				spotfilmcurve:'',
				spotfsync:'',
				spotlinescreen:'',
				spotmindot:'',
				spotplatemat:'',
				spotplaterate:{
					id:null,
					baseprice:0,
					isdefault:'',
					rateunits:{
						id:null,
						name:'',
						classType:'',
					},
					seconddescription:'',
					servicenote:'',
					servicetype:{
						id:null,
						categoryname:'',
						iifclass:'',
						iifcode:'',
						type:'',
						classType:'',
					},
					size:'',
					classType:'',
				},
				spotplaterelief:'',
				spotresolution:'',
				spotscreentype:'',
				spottrap:'',
				stickyback:'',
				target:'',
				tonewedgecolors:'',
				tonewedgelocation:'',
				tonewedgepercent:'',
				tonewedgesize:'',
				trashafterthirtydays:'',
				trimspecs:'',
				varnamplitude:'',
				varnanilox:'',
				varnbump:'',
				varnfilmcurve:'',
				varnfsync:'',
				varnlinescreen:'',
				varnmindot:'',
				varnplatemat:'',
				varnplaterate:{
					id:null,
					baseprice:0,
					isdefault:'',
					rateunits:{
						id:null,
						name:'',
						classType:'',
					},
					seconddescription:'',
					servicenote:'',
					servicetype:{
						id:null,
						categoryname:'',
						iifclass:'',
						iifcode:'',
						type:'',
						classType:'',
					},
					size:'',
					classType:'',
				},
				varnplaterelief:'',
				varnresolution:'',
				varnscreentype:'',
				varntrap:'',
				whitecutback:'',
				classType:'',
			},
			staggeracross:'',
			status:{
				id:null,
				status:'',
				classType:'',
			},
			teeth:'',
			templategusset:'',
			templateheight:'',
			templatelip:'',
			templatewidth:'',
			trashafterthirtydays:'',
			upcinfo:{
				id:null,
				magnification:'',
				number:'',
				qrcode:'',
				qrcodesize:'',
				type:'',
				classType:'',
			},
			urgency:'',
			workflow:'',
			classType:'',
		};
  }

  public createForm():FormGroup{
     return this.fb.group({
        "actualcenters": [this.item.actualcenters],
        "actualcenters2": [this.item.actualcenters2],
        "actualnounits": [this.item.actualnounits],
     });
  }
}
